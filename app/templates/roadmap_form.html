{% extends "base.html" %}

{% block title %}{{ 'Edit Roadmap' if is_edit else 'Create Roadmap' }}{% endblock %}
{% block body_class %}roadmap-body{% endblock %}

{% block content %}
  <div class="top-right">
    <a href="{{ url_for('main.projects') }}" class="btn btn-base btn-nav btn-sm">Projects Overview</a>
  </div>

  <div class="form-wrapper card shadow-sm p-4">
    <h2 class="mb-1">{{ 'Edit Roadmap' if is_edit else 'Create Roadmap' }}</h2>
    <p class="text-muted">Project: {{ project.project_name }}</p>

    <form method="POST" class="mt-3">
      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label">Quarter</label>
          <select name="quarter" class="form-select" required>
            {% set selected_quarter = request.form.get('quarter') or (roadmap.quarter if roadmap else '') %}
            <option value="" disabled {% if not selected_quarter %}selected{% endif %}>Select a quarter</option>
            {% for option in ['Q1 2025', 'Q2 2025', 'Q3 2025', 'Q4 2025'] %}
              <option value="{{ option }}" {% if option == selected_quarter %}selected{% endif %}>{{ option }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="col-md-6">
          <label class="form-label">Team Size</label>
          <input type="number" name="team_size" class="form-control" min="1" required
                 value="{{ request.form.get('team_size') or (roadmap.team_size if roadmap else '') }}">
        </div>

        <div class="col-md-6">
          <label class="form-label">Sprint Capacity</label>
          <input type="number" name="sprint_capacity" class="form-control" min="1" required
                 value="{{ request.form.get('sprint_capacity') or (roadmap.sprint_capacity if roadmap else '') }}">
        </div>

        <div class="col-md-6">
          <label class="form-label">Budget Allocation</label>
          <input type="number" name="budget_allocation" class="form-control" min="0" required
                 value="{{ request.form.get('budget_allocation') or (roadmap.budget_allocation if roadmap else '') }}">
        </div>
      </div>

      <div class="d-flex gap-2 mt-4">
        <button class="btn btn-primary">{{ 'Save Changes' if is_edit else 'Create Roadmap' }}</button>
        <a href="{{ url_for('main.roadmap_overview', project_id=project.id_project) }}" class="btn btn-secondary">Cancel</a>
      </div>
    </form>
  </div>
{% endblock %}
