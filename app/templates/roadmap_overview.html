{% extends "base.html" %}

{% block title %}Roadmap Overview{% endblock %}
{% block body_class %}roadmap-body{% endblock %}

{% block content %}
  <div class="top-right">
    <a href="{{ url_for('main.projects') }}" class="btn btn-base btn-nav btn-sm">Projects Overview</a>
  </div>

  <h2>Roadmap for {{ project.project_name }}</h2>
  <p class="text-muted">{{ project.company.company_name }}</p>

  {% if roadmap is none %}
    <div class="alert alert-info mt-4">
      No roadmap has been created for this project yet.
    </div>
    {% if session['role'] == 'founder' %}
      <a href="{{ url_for('main.create_roadmap', project_id=project.id_project) }}" class="btn btn-primary mt-3">Create Roadmap</a>
    {% endif %}
  {% else %}
    <div class="roadmap-card card shadow-sm p-4 mt-3">
      <div class="d-flex justify-content-between align-items-start flex-wrap gap-2">
        <div>
          <p class="text-uppercase text-muted mb-1">Quarter</p>
          <h4 class="mb-0">{{ roadmap.quarter }}</h4>
          <p class="small text-secondary">Created {{ roadmap.createdat.strftime('%d %b %Y') }}</p>
        </div>
        {% if session['role'] == 'founder' %}
          <a href="{{ url_for('main.edit_roadmap', project_id=project.id_project) }}" class="btn btn-edit">Edit Roadmap</a>
        {% endif %}
      </div>

      <div class="row g-3 mt-2">
        <div class="col-md-4">
          <div class="roadmap-metric">
            <p class="label">Team Size</p>
            <p class="value">{{ roadmap.team_size }}</p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="roadmap-metric">
            <p class="label">Sprint Capacity</p>
            <p class="value">{{ roadmap.sprint_capacity }}</p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="roadmap-metric">
            <p class="label">Budget Allocation</p>
            <p class="value">{{ roadmap.budget_allocation }}</p>
          </div>
        </div>
      </div>
    </div>
  {% endif %}
{% endblock %}
