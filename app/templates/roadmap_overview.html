{% extends "base.html" %}

{% block title %}Roadmap Overview{% endblock %}
{% block body_class %}roadmap-body{% endblock %}

{% block content %}
  <!-- DASHBOARD BUTTON -->
  <div class="top-right">
    <a href="{{ url_for('main.projects') }}" class="btn btn-base btn-nav btn-sm">Projects Overview</a>
  </div>

  <h2>Roadmaps for Project: {{ project.project_name }}</h2>
  <p class="text-muted">{{ project.company.company_name }}</p>

  <div class="mt-4">
    {% if roadmaps|length == 0 %}
      <div class="alert alert-info mt-4">
        No roadmaps yet for this project.
      </div>

      {% if session['role'] == 'founder' %}
        <a href="{{ url_for('main.add_roadmap', project_id=project.id_project) }}"
           class="btn btn-primary mt-3">Add First Roadmap</a>
      {% endif %}
    {% else %}
      <div class="row g-4">
        {% for r in roadmaps %}
          <div class="col-md-4">
            <div class="card p-3">
              <h5 class="mb-1">{{ r.quarter }}</h5>
              <p class="text-muted small mb-2">Created: {{ r.createdat.strftime("%d %b %Y") }}</p>

              <ul class="list-group small mb-3">
                <li class="list-group-item">Team Size: <strong>{{ r.team_size }}</strong></li>
                <li class="list-group-item">Sprint Capacity: <strong>{{ r.sprint_capacity }}</strong></li>
                <li class="list-group-item">Budget Allocation: <strong>{{ r.budget_allocation }}</strong></li>
              </ul>

              <a href="{{ url_for('main.roadmap_overview', project_id=project.id_project) }}"
                 class="btn btn-primary btn-sm w-100">View Milestones</a>
            </div>
          </div>
        {% endfor %}
      </div>

      {% if session['role'] == 'founder' %}
        <a href="{{ url_for('main.add_roadmap', project_id=project.id_project) }}"
           class="btn btn-primary mt-4">Add Another Roadmap</a>
      {% endif %}
    {% endif %}
  </div>
{% endblock %}