{% extends "base.html" %}

{% block title %}Roadmap Overview{% endblock %}

{% block content %}

<div class="top-right">
    <a href="{{ url_for('main.projects') }}" class="btn btn-base btn-nav btn-sm">
        Projects Overview
    </a>
</div>

<h2>Roadmap for {{ project.project_name }}</h2>
<p class="text-muted">{{ project.company.company_name }}</p>

{% if roadmaps|length == 0 %}
    <div class="alert alert-info mt-4">
        No roadmap yet for this project.
    </div>

    {% if session['role'] == 'founder' %}
        <a href="{{ url_for('main.add_roadmap', project_id=project.id_project) }}"
           class="btn btn-primary mt-3">Create Roadmap</a>
    {% endif %}
{% else %}
    {% set r = roadmaps[0] %}

    <div class="card p-4 mt-4">
        <h4>{{ r.quarter }}</h4>
        <p class="text-muted small">Created: {{ r.createdat.strftime("%d %b %Y") }}</p>

        <ul class="list-group mb-3">
            <li class="list-group-item">Team Size: <strong>{{ r.team_size }}</strong></li>
            <li class="list-group-item">Sprint Capacity: <strong>{{ r.sprint_capacity }}</strong></li>
            <li class="list-group-item">Budget Allocation: <strong>{{ r.budget_allocation }}</strong></li>
        </ul>

        <a href="#" class="btn btn-primary btn-sm w-100">View Milestones</a>

        {% if session['role'] == 'founder' %}
            <a href="{{ url_for('main.edit_roadmap', roadmap_id=r.id_roadmap) }}"
               class="btn btn-edit btn-sm w-100 mt-2">Edit Roadmap</a>
        {% endif %}
    </div>
{% endif %}

{% endblock %}
