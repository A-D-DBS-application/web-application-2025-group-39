{% extends "base.html" %}

{% block title %}Add Milestone{% endblock %}
{% block body_class %}milestone-body{% endblock %}

{% block content %}
<!-- PAGETITLE -->
<h2 class="text-center mb-4">Add Milestone</h2>

<div class="milestone-form">

    <!-- FORM (ADD MILESTONE) -->
    <form method="POST">

        <!-- NAME -->
        <div class="mb-3">
            <label class="form-label fw-bold">Milestone Name</label>
            <input type="text" name="name" class="form-control" required>
        </div>

        <!-- DATES -->
        <div class="row">
            <div class="col mb-3">
                <label class="form-label fw-bold">Start Date</label>
                <input type="date" name="start_date" class="form-control">
            </div>

            <div class="col mb-3">
                <label class="form-label fw-bold">End Date</label>
                <input type="date" name="end_date" class="form-control">
            </div>
        </div>

        <!-- GOAL -->
        <div class="mb-3">
            <label class="form-label fw-bold">Goal</label>
            <textarea name="goal" class="form-control" rows="3"></textarea>
        </div>

        <!-- STATUS -->
        <div class="mb-3">
            <label class="form-label fw-bold">Status</label>
            <select name="status" class="form-select" required>
                <option value="Planned">Planned</option>
                <option value="In Progress">In Progress</option>
                <option value="Done">Done</option>
            </select>
        </div>

        <!-- FEATURE MULTI-SELECT -->
        <hr class="my-4">                                                                                                   <!-- Horizontale lijn als visuele scheiding; my-4 = marge boven én onder -->    
        <h4 class="mb-3">Assign Features (recommended by VECTR score)</h4>

        <div class="mb-3">
            <label class="form-label">Select one or more features</label>

            <select name="features" multiple class="form-select" size="8">
                {% for f in features %}
                <option value="{{ f.id_feature }}" {% if f.id_feature in selected_features %}selected{% endif %}>
                    {{ f.name_feature }}
                    — VECTR:
                    {% if f.vectr_score %}
                    {{ "%.2f"|format(f.vectr_score) }}                                                                      <!-- Toon vectr_score met 2 decimalen -->
                    {% else %}
                    N/A                                                                                                     <!-- Als score ontbreekt -->
                    {% endif %}
                </option>
                {% endfor %}
            </select>

            <small class="text-muted">
                Hold CTRL (Windows) or CMD (Mac) to select multiple features.
            </small>                                                                                                       <!-- Helpertekst om multi-select gedrag uit te leggen -->
        </div>

        <div class="col-12">
            <button type="submit" class="btn btn-base btn-primary-custom w-100 mb-2">
            Add Milestone
            </button>

            <a href="{{ url_for('main.roadmap_overview', project_id=roadmap.id_project) }}"
            class="btn btn-base btn-secondary-custom w-100 mt-2">
            Cancel
            </a>
        </div>


    </form>

</div>
{% endblock %}